{% extends "base_generic.html" %}

{% block content %}

<p>
You can borrow a maximum of <strong>{{ request.user.max_books }} </strong>books.</p>
<p>
Using the website you can reserve up to {{ request.user.max_books }}.
However, you will need to give back your currently borrowed books before being able to pickup your reserved books, so that
the total books checked-out are not over your maximum.
</p>

    <h2>Borrowed books</h2>

    <ul>

      {% for loan in loan_list %}
      {% if loan.is_loan %}
      <li class="{% if loan.is_overdue %}text-danger{% endif %}">
        <a href="{% url 'book-detail' loan.book_instance.book.pk %}">{{loan.book_instance.book.title}}</a> (checked out on {{loan.loan_date}}, due {{ loan.due_date }})
      </li>
      {% endif %}
      {% endfor %}
    </ul>

    <h2>Reserved books</h2>
    <ul>

    {% for loan in loan_list %}
    {% if loan.is_reservation %}
    <li>
      <a href="{% url 'book-detail' loan.book_instance.book.pk %}">{{loan.book_instance.book.title}}</a> (reserved on {{loan.reserved_date}}) <a href="{% url 'cancel-reservation' loan.pk %}">Cancel reservation</a>
    </li>
    {% endif %}
    {% endfor %}
    </ul>

    <h2>Past loans</h2>
    <ul>

    {% for loan in loan_list %}
    {% if loan.return_date and loan.loan_date %}
    <li>
      <a href="{% url 'book-detail' loan.book_instance.book.pk %}">{{loan.book_instance.book.title}}</a> (from {{loan.loan_date}} to {{loan.return_date}})
    </li>
    {% endif %}
    {% endfor %}
    </ul>
{% endblock %}

